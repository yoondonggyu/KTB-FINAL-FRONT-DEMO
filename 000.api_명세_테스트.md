# API ëª…ì„¸ í…ŒìŠ¤íŠ¸

---

## ğŸš¨ ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ (Common Error Codes)

> ëª¨ë“  APIì—ì„œ ê³µí†µìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì—ëŸ¬ ì½”ë“œì…ë‹ˆë‹¤.

### 401 Unauthorized

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "unauthorized", "error_code": 4010, "data": null } | ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "token_expired", "error_code": 4011, "data": null } | í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "invalid_token", "error_code": 4012, "data": null } | ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤ |

---

### 403 Forbidden

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "forbidden", "error_code": 4030, "data": null } | ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤ |

---

### 404 Not Found

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "resource_not_found", "error_code": 4040, "data": null } | ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ |

---

### 500 Internal Server Error

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "internal_server_error", "error_code": 5000, "data": null } | ì„œë²„ ì˜¤ë¥˜ |

---

### 503 Service Unavailable

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "service_unavailable", "error_code": 5030, "data": null } | ì„œë¹„ìŠ¤ê°€ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤ |

---

### ì—ëŸ¬ ì½”ë“œ ì²´ê³„

| ë²”ìœ„ | ì„¤ëª… |
| --- | --- |
| 4001 ~ 4009 | 400 Bad Request (ì˜ëª»ëœ ìš”ì²­) |
| 4010 ~ 4019 | 401 Unauthorized (ì¸ì¦ ì˜¤ë¥˜) |
| 4030 ~ 4039 | 403 Forbidden (ê¶Œí•œ ì˜¤ë¥˜) |
| 4040 ~ 4049 | 404 Not Found (ë¦¬ì†ŒìŠ¤ ì—†ìŒ) |
| 5000 ~ 5009 | 500 Internal Server Error (ì„œë²„ ì˜¤ë¥˜) |
| 5030 ~ 5039 | 503 Service Unavailable (ì„œë¹„ìŠ¤ ë¶ˆê°€) |

---

## 1. OCR í…ìŠ¤íŠ¸ ì¶”ì¶œ + ì„ë² ë”©

**Endpoint:** `POST /ai/ocr/extract`

**ì²˜ë¦¬ë°©ì‹:** ğŸ”„ **ë¹„ë™ê¸°** (íŒŒì¼ í¬ê¸°ì— ë”°ë¼ ì‹œê°„ ì†Œìš”)

### ì„¤ëª…

<aside>

ì´ë¯¸ì§€ë‚˜ PDFì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  **ë‚´ë¶€ì—ì„œ ì„ë² ë”©ê¹Œì§€ ì²˜ë¦¬**

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- file_url : string
- file_type : string
- type : string
- user_id : string
- document_id : string

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "file_url": "https://s3.../resume.pdf",
  "file_type": "pdf",           // "pdf", "image"
  "type": "resume",             // "resume", "portfolio", "job_posting"
  "user_id": "user_456",
  "document_id": "resume_123"   // resume_id, portfolio_id, posting_id
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `file_url` | string | âœ… | S3 ë“± ì €ì¥ì†Œì— ì—…ë¡œë“œëœ íŒŒì¼ URL |
| `file_type` | string | âœ… | íŒŒì¼ í˜•ì‹ (`"pdf"`, `"image"`) |
| `type` | string | âœ… | ë¬¸ì„œ íƒ€ì… (`"resume"`, `"portfolio"`, `"job_posting"`) |
| `user_id` | string | âœ… | ì‚¬ìš©ì ê³ ìœ  ID |
| `document_id` | string | âœ… | ë¬¸ì„œ ê³ ìœ  ID (resume_id, portfolio_id, posting_id) |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200 (ì¦‰ì‹œ ì‘ë‹µ)

```json
{
  "message": "ocr_task_created",
  "data": {
    "task_id": "task_abc123",
    "status": "processing"
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

OCR ì²˜ë¦¬ ì‘ì—… ìƒì„± ì™„ë£Œ - ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œì‘

</aside>

---

### Polling ì‘ë‹µ (ì™„ë£Œ ì‹œ)

**Endpoint:** `GET /ai/task/{task_id}`

### Body / Parameter / Header / Query

- 200

```json
{
  "message": "task_completed",
  "data": {
    "task_id": "task_abc123",
    "status": "completed",
    "result": {
      "success": true,
      "extracted_text": "ì¶”ì¶œëœ í…ìŠ¤íŠ¸ ì „ì²´...",
      "pages": [
        { "page": 1, "text": "1í˜ì´ì§€ í…ìŠ¤íŠ¸..." },
        { "page": 2, "text": "2í˜ì´ì§€ í…ìŠ¤íŠ¸..." }
      ],
      "vector_id": "vec_abc123",
      "collection": "resumes"
    }
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

OCR í…ìŠ¤íŠ¸ ì¶”ì¶œ ë° ì„ë² ë”© ì €ì¥ ì™„ë£Œ

</aside>

---

## ì˜ˆì™¸ ì²˜ë¦¬ (Error Response)

### 400 Bad Request

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "invalid_file_type", "error_code": 4001, "data": null } | ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "invalid_document_type", "error_code": 4002, "data": null } | ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¬¸ì„œ íƒ€ì…ì…ë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "missing_required_field", "error_code": 4003, "data": null } | í•„ìˆ˜ í•„ë“œê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤ |

---

### 404 Not Found

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "file_not_found", "error_code": 4041, "data": null } | íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "task_not_found", "error_code": 4042, "data": null } | í•´ë‹¹ task_idë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ |

---

### 500 Internal Server Error

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "ocr_processing_failed", "error_code": 5001, "data": null } | OCR ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "embedding_failed", "error_code": 5002, "data": null } | ë²¡í„° ì„ë² ë”© ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "internal_server_error", "error_code": 5000, "data": null } | ì„œë²„ ì˜¤ë¥˜ |

---

### 503 Service Unavailable

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "ai_service_unavailable", "error_code": 5031, "data": null } | AI ì„œë¹„ìŠ¤ê°€ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤ |

---

---

## 2. ì„ë² ë”© ì €ì¥ (í…ìŠ¤íŠ¸ ì§ì ‘ ì…ë ¥ìš©)

**Endpoint:** `POST /ai/file/embed`

**ì²˜ë¦¬ë°©ì‹:** âš¡ **ë™ê¸°** (í…ìŠ¤íŠ¸ë§Œ ì²˜ë¦¬í•˜ë¯€ë¡œ ë¹ ë¦„)

### ì„¤ëª…

<aside>

**í…ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì…ë ¥**í•œ ê²½ìš° VectorDBì— ì„ë² ë”©í•˜ì—¬ ì €ì¥

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- type : string
- id : string
- user_id : string
- text : string

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "type": "resume",           // "resume", "portfolio", "job_posting"
  "id": "resume_123",         // resume_id, portfolio_id, posting_id
  "user_id": "user_456",
  "text": "ë§ˆìŠ¤í‚¹ëœ ì´ë ¥ì„œ í…ìŠ¤íŠ¸..."
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `type` | string | âœ… | ë¬¸ì„œ íƒ€ì… (`"resume"`, `"portfolio"`, `"job_posting"`) |
| `id` | string | âœ… | ë¬¸ì„œ ê³ ìœ  ID |
| `user_id` | string | âœ… | ì‚¬ìš©ì ê³ ìœ  ID |
| `text` | string | âœ… | ì„ë² ë”©í•  í…ìŠ¤íŠ¸ ë‚´ìš© |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200

```json
{
  "message": "embedding_success",
  "data": {
    "success": true,
    "type": "resume",
    "id": "resume_123",
    "vector_id": "vec_abc123",
    "collection": "resumes"
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

ì„ë² ë”© ì €ì¥ ì™„ë£Œ

</aside>

---

## ì˜ˆì™¸ ì²˜ë¦¬ (Error Response)

### 400 Bad Request

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "invalid_document_type", "error_code": 4002, "data": null } | ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¬¸ì„œ íƒ€ì…ì…ë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "empty_text", "error_code": 4004, "data": null } | í…ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤ |

---

---

## 3. ë¶„ì„ ë° ë§¤ì¹­ë„

**Endpoint:** `POST /ai/analyze`

**ì²˜ë¦¬ë°©ì‹:** ğŸ“¡ **ìŠ¤íŠ¸ë¦¬ë° (SSE)** - LLM ì‘ë‹µì„ ì‹¤ì‹œê°„ ì „ì†¡

### ì„¤ëª…

<aside>

ì´ë ¥ì„œ/ì±„ìš©ê³µê³  ë¶„ì„ + ë§¤ì¹­ë„ê¹Œì§€ í•œë²ˆì— ì²˜ë¦¬

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- resume_id : string
- posting_id : string
- resume_text : string
- posting_text : string

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "resume_id": "resume_123",
  "posting_id": "posting_789",
  "resume_text": "ì´ë ¥ì„œ í…ìŠ¤íŠ¸...",
  "posting_text": "ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸..."
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `resume_id` | string | âœ… | ì´ë ¥ì„œ ê³ ìœ  ID |
| `posting_id` | string | âœ… | ì±„ìš©ê³µê³  ê³ ìœ  ID |
| `resume_text` | string | âœ… | ì´ë ¥ì„œ í…ìŠ¤íŠ¸ ë‚´ìš© |
| `posting_text` | string | âœ… | ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸ ë‚´ìš© |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200 (SSE ìŠ¤íŠ¸ë¦¬ë°)

```json
{
  "message": "analysis_complete",
  "data": {
    "success": true,
    "resume_analysis": {
      "strengths": ["í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ê²½í—˜ 3ë…„", "React, TypeScript ìˆ™ë ¨ë„ ë†’ìŒ"],
      "weaknesses": ["í´ë¼ìš°ë“œ ê²½í—˜ ë¶€ì¡±"],
      "suggestions": ["AWS ìê²©ì¦ ì·¨ë“ ì¶”ì²œ"]
    },
    "posting_analysis": {
      "company": "ì¹´ì¹´ì˜¤",
      "position": "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì",
      "required_skills": ["React", "TypeScript", "Next.js"],
      "preferred_skills": ["GraphQL", "AWS"],
      "deadline": "2026-01-15"
    },
    "matching": {
      "score": 85,
      "grade": "A",
      "matched_skills": ["React", "TypeScript"],
      "missing_skills": ["GraphQL", "Next.js"],
      "recommendations": ["í¬íŠ¸í´ë¦¬ì˜¤ì— í”„ë¡œì íŠ¸ ì„±ê³¼ ìˆ˜ì¹˜í™” í•„ìš”"]
    }
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

ì´ë ¥ì„œ/ì±„ìš©ê³µê³  ë¶„ì„ ë° ë§¤ì¹­ë„ ê³„ì‚° ì™„ë£Œ

</aside>

---

## ì˜ˆì™¸ ì²˜ë¦¬ (Error Response)

### 400 Bad Request

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "missing_resume_text", "error_code": 4005, "data": null } | ì´ë ¥ì„œ í…ìŠ¤íŠ¸ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "missing_posting_text", "error_code": 4006, "data": null } | ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤ |

---

---

## 4. ëª¨ì˜ ë©´ì ‘

---

### 4.1 ì§ˆë¬¸/ê¼¬ë¦¬ì§ˆë¬¸ ìƒì„±

**Endpoint:** `POST /ai/interview/question`

**ì²˜ë¦¬ë°©ì‹:** âš¡ **ë™ê¸°** - ì§ˆë¬¸ 1ê°œë§Œ ìƒì„±í•˜ë¯€ë¡œ ë¹ ë¦„

### ì„¤ëª…

<aside>

ì²« ì§ˆë¬¸ ë˜ëŠ” ê¼¬ë¦¬ì§ˆë¬¸ ìƒì„± (DBì—ì„œ íˆìŠ¤í† ë¦¬ ì¡°íšŒ + VectorDB RAG ê²€ìƒ‰)

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- room_id : string
- session_id : string
- interview_type : string
- resume_text : string
- posting_text : string

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "room_id": "room_001",
  "session_id": "session_abc123",
  "interview_type": "technical",  // "personality", "technical"
  "resume_text": "ì´ë ¥ì„œ í…ìŠ¤íŠ¸...",
  "posting_text": "ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸..."
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `room_id` | string | âœ… | ì±„íŒ…ë°© ê³ ìœ  ID |
| `session_id` | string | âœ… | ë©´ì ‘ ì„¸ì…˜ ID |
| `interview_type` | string | âœ… | ë©´ì ‘ ìœ í˜• (`"personality"`, `"technical"`) |
| `resume_text` | string | âœ… | ì´ë ¥ì„œ í…ìŠ¤íŠ¸ |
| `posting_text` | string | âœ… | ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸ |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200

```json
{
  "message": "question_generated",
  "data": {
    "success": true,
    "question_id": "q_001",
    "question": "ê²°ì œ ì‹œìŠ¤í…œ ì—°ë™ ì‹œ ê°€ì¥ ì–´ë ¤ì› ë˜ ë¶€ë¶„ì€ ë¬´ì—‡ì´ì—ˆë‚˜ìš”?",
    "is_followup": true,
    "question_number": 3
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

ë©´ì ‘ ì§ˆë¬¸ ìƒì„± ì™„ë£Œ

</aside>

---

## ì˜ˆì™¸ ì²˜ë¦¬ (Error Response)

### 400 Bad Request

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "invalid_interview_type", "error_code": 4007, "data": null } | ì§€ì›í•˜ì§€ ì•ŠëŠ” ë©´ì ‘ ìœ í˜•ì…ë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "max_questions_reached", "error_code": 4008, "data": null } | ìµœëŒ€ ì§ˆë¬¸ ìˆ˜(5ê°œ)ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤ |

---

---

### 4.2 Q&A ê°œë³„ ì €ì¥

**Endpoint:** `POST /ai/interview/save`

**ì²˜ë¦¬ë°©ì‹:** âš¡ **ë™ê¸°** - ë‹¨ìˆœ ì €ì¥ì´ë¯€ë¡œ ë¹ ë¦„

### ì„¤ëª…

<aside>

ì‚¬ìš©ì ë‹µë³€ í›„ Q&A ìŒì„ DBì— ì €ì¥ (ê¼¬ë¦¬ì§ˆë¬¸ ë§¥ë½ ìœ ì§€ìš©)

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- room_id : string
- session_id : string
- question_id : string
- question : string
- answer : string
- is_followup : boolean
- question_number : integer

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "room_id": "room_001",
  "session_id": "session_abc123",
  "question_id": "q_001",
  "question": "Reactì˜ Virtual DOMì´ ë­”ê°€ìš”?",
  "answer": "ì‹¤ì œ DOMê³¼ ë¹„êµí•´ì„œ ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê±°ì˜ˆìš”",
  "is_followup": false,
  "question_number": 1
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `room_id` | string | âœ… | ì±„íŒ…ë°© ê³ ìœ  ID |
| `session_id` | string | âœ… | ë©´ì ‘ ì„¸ì…˜ ID |
| `question_id` | string | âœ… | ì§ˆë¬¸ ê³ ìœ  ID |
| `question` | string | âœ… | ì§ˆë¬¸ ë‚´ìš© |
| `answer` | string | âœ… | ì‚¬ìš©ì ë‹µë³€ |
| `is_followup` | boolean | âœ… | ê¼¬ë¦¬ì§ˆë¬¸ ì—¬ë¶€ |
| `question_number` | integer | âœ… | ì§ˆë¬¸ ë²ˆí˜¸ (1~5) |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200

```json
{
  "message": "qa_saved",
  "data": {
    "success": true,
    "qa_id": "qa_001",
    "session_id": "session_abc123",
    "saved_count": 1,
    "max_questions": 5
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

Q&A ì €ì¥ ì™„ë£Œ

</aside>

---

---

### 4.3 ë©´ì ‘ í‰ê°€ ë° í”¼ë“œë°±

**Endpoint:** `POST /ai/interview/report`

**ì²˜ë¦¬ë°©ì‹:** ğŸ“¡ **ìŠ¤íŠ¸ë¦¬ë° (SSE)** - ë¦¬í¬íŠ¸ ë‚´ìš©ì„ ì‹¤ì‹œê°„ ì „ì†¡

### ì„¤ëª…

<aside>

ë©´ì ‘ ì¢…ë£Œ ì‹œ **DBì— ì €ì¥ëœ Q&A ê¸°ë°˜**ìœ¼ë¡œ í‰ê°€ ë° í”¼ë“œë°± ì œê³µ

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- room_id : string
- session_id : string
- interview_type : string
- resume_text : string
- posting_text : string
- ended_by : string

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "room_id": "room_001",
  "session_id": "session_abc123",
  "interview_type": "technical",
  "resume_text": "ì´ë ¥ì„œ í…ìŠ¤íŠ¸...",
  "posting_text": "ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸...",
  "ended_by": "auto"  // "auto" (5ê°œ ì™„ë£Œ) ë˜ëŠ” "manual" (ì§ì ‘ ì¢…ë£Œ)
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `room_id` | string | âœ… | ì±„íŒ…ë°© ê³ ìœ  ID |
| `session_id` | string | âœ… | ë©´ì ‘ ì„¸ì…˜ ID |
| `interview_type` | string | âœ… | ë©´ì ‘ ìœ í˜• |
| `resume_text` | string | âœ… | ì´ë ¥ì„œ í…ìŠ¤íŠ¸ |
| `posting_text` | string | âœ… | ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸ |
| `ended_by` | string | âœ… | ì¢…ë£Œ ë°©ì‹ (`"auto"`, `"manual"`) |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200

```json
{
  "message": "report_generated",
  "data": {
    "success": true,
    "room_id": "room_001",
    "session_id": "session_abc123",
    "evaluations": [
      {
        "qa_id": "qa_001",
        "question": "Reactì˜ Virtual DOMì´ ë­”ê°€ìš”?",
        "answer": "ì‹¤ì œ DOMê³¼ ë¹„êµí•´ì„œ...",
        "score": 80,
        "good_points": ["Virtual DOMì˜ ê¸°ë³¸ ê°œë…ì„ ì˜ ì´í•´í•˜ê³  ìˆìŒ"],
        "improvements": ["Reconciliation ì•Œê³ ë¦¬ì¦˜ ì„¤ëª… ì¶”ê°€í•˜ë©´ ì¢‹ìŒ"]
      }
    ],
    "report": {
      "total_score": 78,
      "grade": "B+",
      "strength_patterns": ["ê¸°ìˆ  ê°œë…ì— ëŒ€í•œ ì´í•´ë„ê°€ ë†’ìŒ"],
      "weakness_patterns": ["ì‹¬í™” ê°œë… ì„¤ëª…ì´ ë¶€ì¡±í•¨"],
      "learning_guide": ["React ì‹¬í™” ê°œë… í•™ìŠµ"]
    }
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

ë©´ì ‘ í‰ê°€ ë° í”¼ë“œë°± ë¦¬í¬íŠ¸ ìƒì„± ì™„ë£Œ

</aside>

---

## ì˜ˆì™¸ ì²˜ë¦¬ (Error Response)

### 400 Bad Request

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "no_qa_found", "error_code": 4009, "data": null } | ì €ì¥ëœ Q&Aê°€ ì—†ìŠµë‹ˆë‹¤ |

### 404 Not Found

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "session_not_found", "error_code": 4043, "data": null } | ë©´ì ‘ ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ |

---

---

## 5. ëŒ€í™” ì²˜ë¦¬ (RAG + ì—ì´ì „íŠ¸)

**Endpoint:** `POST /ai/chat`

**ì²˜ë¦¬ë°©ì‹:** ğŸ“¡ **ìŠ¤íŠ¸ë¦¬ë° (SSE)** - íƒ€ì´í•‘ íš¨ê³¼ë¡œ ì‹¤ì‹œê°„ ì‘ë‹µ ì „ì†¡

### ì„¤ëª…

<aside>

ì¼ë°˜ ëŒ€í™” + RAG ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰ + ì—ì´ì „íŠ¸ Tool ì‹¤í–‰

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- room_id : string
- user_id : string
- message : string

ì„ íƒ í•„ë“œ

- history : array
- tool_result : object

ì„¤ëª…

- application/json
</aside>

### Request Body (ì¼ë°˜ ëŒ€í™”)

```json
{
  "room_id": "room_001",
  "user_id": "user_456",
  "message": "ì´ë²ˆ ì£¼ ì¼ì • ì•Œë ¤ì¤˜",
  "history": [
    { "role": "user", "content": "ì•ˆë…•" },
    { "role": "assistant", "content": "ì•ˆë…•í•˜ì„¸ìš”! ì·¨ì—… ì¤€ë¹„ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?" }
  ]
}
```

### Request Body (Tool ê²°ê³¼ ì „ë‹¬)

```json
{
  "room_id": "room_001",
  "user_id": "user_456",
  "tool_result": {
    "tool": "get_schedule",
    "success": true,
    "data": [
      { "title": "ì¹´ì¹´ì˜¤ 1ì°¨ ë©´ì ‘", "date": "2026-01-08", "time": "14:00" }
    ]
  }
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `room_id` | string | âœ… | ì±„íŒ…ë°© ê³ ìœ  ID |
| `user_id` | string | âœ… | ì‚¬ìš©ì ê³ ìœ  ID |
| `message` | string | âš ï¸ | ì‚¬ìš©ì ë©”ì‹œì§€ (tool_result ì—†ì„ ì‹œ í•„ìˆ˜) |
| `history` | array | âŒ | ì´ì „ ëŒ€í™” ë‚´ì—­ |
| `tool_result` | object | âŒ | Tool ì‹¤í–‰ ê²°ê³¼ (Backend â†’ AI ì¬í˜¸ì¶œ) |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200 (ì¼ë°˜ ëŒ€í™” / RAG)

```json
{
  "message": "chat_response",
  "data": {
    "success": true,
    "response": "ì´ë ¥ì„œ ì‘ì„± íŒì„ ì•Œë ¤ë“œë¦´ê²Œìš”...",
    "tool_used": null
  }
}
```

- 200 (ì—ì´ì „íŠ¸ - Tool ì‹¤í–‰ í•„ìš”)

```json
{
  "message": "tool_required",
  "data": {
    "success": true,
    "response": null,
    "tool_used": {
      "tool": "get_schedule",
      "params": {
        "start_date": "2026-01-06",
        "end_date": "2026-01-12"
      }
    }
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

ëŒ€í™” ì‘ë‹µ ë˜ëŠ” Tool ì‹¤í–‰ ìš”ì²­

</aside>

---

---

## 6. ìº˜ë¦°ë” ì¼ì • íŒŒì‹±

**Endpoint:** `POST /ai/calendar/parse`

**ì²˜ë¦¬ë°©ì‹:** âš¡ **ë™ê¸°** - ê°„ë‹¨í•œ íŒŒì‹± ì‘ì—…

### ì„¤ëª…

<aside>

ìº˜ë¦°ë” ëª¨ë‹¬ì—ì„œ íŒŒì¼/í…ìŠ¤íŠ¸ë¥¼ ë¶„ì„í•˜ì—¬ ì¼ì • ì •ë³´ ì¶”ì¶œ (í¼ ìë™ ì±„ìš°ê¸°ìš©)

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

ì„ íƒ í•„ë“œ 

- file_url : string (íŒŒì¼ ë¶„ì„ ì‹œ)
- text : string (í…ìŠ¤íŠ¸ ë¶„ì„ ì‹œ)

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "file_url": "https://s3.../job_posting.png",  // optional
  "text": "ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸..."                    // optional (file_url ì—†ìœ¼ë©´ í•„ìˆ˜)
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `file_url` | string | âš ï¸ | íŒŒì¼ URL (text ì—†ì„ ì‹œ í•„ìˆ˜) |
| `text` | string | âš ï¸ | ì±„ìš©ê³µê³  í…ìŠ¤íŠ¸ (file_url ì—†ì„ ì‹œ í•„ìˆ˜) |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200

```json
{
  "message": "calendar_parsed",
  "data": {
    "success": true,
    "company": "ì¹´ì¹´ì˜¤",
    "position": "ë°±ì—”ë“œ ê°œë°œì",
    "schedules": [
      { "stage": "ì„œë¥˜ ë§ˆê°", "date": "2026-01-15", "time": null },
      { "stage": "ì½”ë”©í…ŒìŠ¤íŠ¸", "date": "2026-01-20", "time": "14:00" },
      { "stage": "1ì°¨ ë©´ì ‘", "date": "2026-01-25", "time": null }
    ],
    "hashtags": ["#ì¹´ì¹´ì˜¤", "#ë°±ì—”ë“œ", "#ì‹ ì…"]
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

ì¼ì • ì •ë³´ íŒŒì‹± ì™„ë£Œ

</aside>

---

## ì˜ˆì™¸ ì²˜ë¦¬ (Error Response)

### 400 Bad Request

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "no_input_provided", "error_code": 4010, "data": null } | file_url ë˜ëŠ” text ì¤‘ í•˜ë‚˜ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤ |

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "parse_failed", "error_code": 4011, "data": null } | ì¼ì • ì •ë³´ë¥¼ ì¶”ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ |

---

---

## 7. ê²Œì‹œíŒ ì²¨ë¶€íŒŒì¼ ë§ˆìŠ¤í‚¹

**Endpoint:** `POST /ai/masking/draft`

**ì²˜ë¦¬ë°©ì‹:** ğŸ”„ **ë¹„ë™ê¸°** (VLM ì²˜ë¦¬ ì‹œê°„ ì†Œìš”)

### ì„¤ëª…

<aside>

ê²Œì‹œê¸€ ì‘ì„± ì‹œ ì²¨ë¶€íŒŒì¼ì—ì„œ ê°œì¸ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  1ì°¨ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬

</aside>

### ìš”ì²­ êµ¬ì¡°

> Request Header
> 

### í—¤ë”

<aside>

í—¤ë”

- Content-Type

íƒ€ì… 

- String

í•„ìˆ˜ í•„ë“œ 

- file_url : string
- file_type : string

ì„¤ëª…

- application/json
</aside>

### Request Body

```json
{
  "file_url": "https://s3.../document.png",
  "file_type": "image"  // "image", "pdf"
}
```

### Query Parameters

<aside>

ì—†ìŒ

</aside>

### Path Parameters

<aside>

ì—†ìŒ

</aside>

---

### Request Body í•„ë“œ ìƒì„¸

| í•„ë“œ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|:----:|------|
| `file_url` | string | âœ… | S3 ë“± ì €ì¥ì†Œì— ì—…ë¡œë“œëœ íŒŒì¼ URL |
| `file_type` | string | âœ… | íŒŒì¼ í˜•ì‹ (`"image"`, `"pdf"`) |

---

## ì‘ë‹µ (Response)

### Body / Parameter / Header / Query

- 200 (ì¦‰ì‹œ ì‘ë‹µ)

```json
{
  "message": "masking_task_created",
  "data": {
    "task_id": "task_masking_001",
    "status": "processing"
  }
}
```

### Polling ì‘ë‹µ (ì™„ë£Œ ì‹œ)

- 200

```json
{
  "message": "masking_completed",
  "data": {
    "task_id": "task_masking_001",
    "status": "completed",
    "result": {
      "masked_file_url": "https://s3.../document_masked.png",
      "detected_items": [
        { "type": "phone", "location": { "x": 100, "y": 200, "width": 150, "height": 20 } },
        { "type": "email", "location": { "x": 100, "y": 250, "width": 200, "height": 20 } }
      ]
    }
  }
}
```

### ì‘ë‹µ ë©”ì‹œì§€ & ì„¤ëª…

<aside>

ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ ì™„ë£Œ

</aside>

---

## ì˜ˆì™¸ ì²˜ë¦¬ (Error Response)

### 400 Bad Request

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "invalid_file_type", "error_code": 4001, "data": null } | ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤ |

### 500 Internal Server Error

| ì‘ë‹µ Body | ì‘ë‹µ Message |
| --- | --- |
| { "message": "masking_failed", "error_code": 5003, "data": null } | ë§ˆìŠ¤í‚¹ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤ |

---
